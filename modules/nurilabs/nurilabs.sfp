include "modules/service/service.sfp"

class Nurilabs extends Service {
	install_path = "/opt/nurilabs"
	port = 8080

	git_version = "master"
	server {
		ssl = false
		recaptcha_private_key = ""
		//recaptcha_public_key = ""
	}

	procedure install {
		condition {
			this.installed = false
		}
		effect {
			this.installed = true
			this.server.ssl = false
			this.server.recaptcha_private_key = ""
//			this.server.recaptcha_public_key = ""
			this.port = 8080
		}
	}

	procedure set_install_path (path isref String) {
		condition {
			this.installed = false
		}
		effect {
			this.install_path = path
		}
	}

	procedure enable_ssl {
		condition {
			this.running = false
			this.installed = true
			this.server.ssl = false
		}
		effect {
			this.server.ssl = true
		}
	}

	procedure disable_ssl {
		condition {
			this.running = false
			this.installed = true
			this.server.ssl = true
		}
		effect {
			this.server.ssl = false
		}
	}

/*	procedure set_recaptcha_public_key(key isref String) {
		condition { }
		effect {
			this.server.recaptcha_public_key = key
		}
	}*/

	procedure set_recaptcha_private_key(key isref String) {
		condition { }
		effect {
			this.server.recaptcha_private_key = key
		}
	}
}

