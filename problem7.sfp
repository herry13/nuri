#include file("problem7.inc")

//--- initial state ---//
private_cloud as Cloud {
	name    "Private Cloud"
	running true
}

public_cloud as Cloud {
	name    "Public Cloud"
	running true
}

node1 as VM {
	name    "Node 1"
	running true
	on      $private_cloud
	svc     $ws_a
}

ws_a as WebService {
	name    "WS-A"
	running true
	on      $node1
	app     $app_a
}

node2 as VM {
	name    "Node 2"
	running true
	on      $private_cloud
	svc		$app_a
}

app_a as AppService {
	name    "App-A"
	running true
	on      $node2
	web     $ws_a
}

node3 as VM {
	name    "Node 3"
	running false
	on      $private_cloud
	svc     $ws_b
}

ws_b as WebService {
	name    "WS-B"
	running false
	on      $node3
	app     $app_b
}

node4 as VM {
	name    "Node 4"
	running false
	on      $private_cloud
	svc     $app_b
}

app_b as AppService {
	name    "App-B"
	running false
	on      $node4
	web     $ws_b
}

pc1 as Client {
	refer $ws_a
}
pc2 as Client {
	refer $ws_a
}
pc3 as Client {
	refer $ws_a
}

constraint goal {
	$node1.on      $public_cloud
	$node2.on      $public_cloud
	$node3.running false
	$node4.running false
}

constraint global {
	$pc1.refer.running true
	$pc2.refer.running true
	$pc3.refer.running true
}
