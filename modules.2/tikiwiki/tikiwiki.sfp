include "modules/apache/apache.sfp"
include "modules/mysql/mysql.sfp"

class Tikiwiki {
	installed  = false
	path = "/wiki"
	webserver isref Apache
	database isref Mysql

	procedure set_path (path isref String) {
		condition {
			this.installed = false
		}
		effect {
			this.path = path
		}
	}

	procedure set_webserver (ws isref Apache) {
		condition {
			this.installed = false
		}
		effect {
			this.webserver = ws
		}
	}

	procedure set_database (db isref Mysql) {
		condition {
			this.installed = false
		}
		effect {
			this.database = db
		}
	}

	procedure install {
		condition {
			this.webserver != null
			this.webserver.installed = true
			this.webserver.running = false
			this.webserver.php_module = true
			this.webserver.php_mysql_module = true

			this.database != null
			this.database.running = true
		}
		effect {
			this.installed = true
		}
	}

	procedure uninstall {
		condition { }
		effect {
			this.installed = false
		}
	}
}
